{% extends 'base.html' %}

{% block title %}–ö–ª–∏–µ–Ω—Ç—ã | CRM{% endblock %}

{% block content %}
<div class="container-fluid px-5 py-4">
    <h2 class="mb-5 text-center fw-bold">üë• –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>

    <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ -->
    <div class="d-flex justify-content-end mb-4">
        <a href="{% url 'add_client' %}" class="btn btn-success px-4 py-2 fs-5 rounded-4 shadow">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</a>
    </div>

    {% if clients %}
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-xl-4 g-4">
            {% for client in clients %}
                <div class="col">
                    <div class="card h-100 shadow-lg border-0 rounded-4">
                        <div class="card-body">
                            <h5 class="card-title fw-bold text-primary">{{ client.name }}</h5>
                            <p class="card-text mb-2"><i class="bi bi-envelope me-2"></i>{{ client.email }}</p>
                            <p class="card-text mb-2"><i class="bi bi-telephone me-2"></i>{{ client.phone }}</p>
                            <p class="card-text mb-2"><i class="bi bi-calendar me-2"></i>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: {{ client.created_at|date:"d M Y" }}</p>
                        </div>
                        <div class="card-footer bg-transparent border-0 d-flex justify-content-between px-3 pb-3">
                            <a href="{% url 'edit_client' client.id %}" class="btn btn-outline-info rounded-pill px-3">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                            <button class="btn btn-outline-danger rounded-pill px-3" data-bs-toggle="modal" data-bs-target="#deleteModal{{ client.id }}">üóë –£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    </div>
                </div>

                <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
                <div class="modal fade" id="deleteModal{{ client.id }}" tabindex="-1" aria-labelledby="deleteModalLabel{{ client.id }}" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="deleteModalLabel{{ client.id }}">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
                            </div>
                            <div class="modal-body">
                                –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ <strong>{{ client.name }}</strong>?
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                                <a href="{% url 'delete_client' client.id %}" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å</a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info text-center mt-5">
            –ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ üöÄ
        </div>
    {% endif %}
</div>
{% endblock %}

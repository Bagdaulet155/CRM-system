{% extends 'base.html' %}

{% block title %}–ö–ª–∏–µ–Ω—Ç—ã | CRM{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-4 text-center">üë• –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>

    <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ -->
    <div class="mb-3">
        <a href="{% url 'add_client' %}" class="btn btn-success">–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</a>
    </div>

    {% if clients %}
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
            {% for client in clients %}
                <div class="col">
                    <div class="card h-100 shadow-lg border-0 rounded-4">
                        <div class="card-body">
                            <h5 class="card-title fw-bold text-primary">{{ client.name }}</h5>
                            <p class="card-text mb-2"><i class="bi bi-envelope"></i> {{ client.email }}</p>
                            <p class="card-text mb-2"><i class="bi bi-telephone"></i> {{ client.phone }}</p>
                            <!-- –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞ -->
                            <p class="card-text mb-2"><i class="bi bi-calendar"></i> –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: {{ client.created_at|date:"d M Y" }}</p>
                        </div>
                        <div class="card-footer bg-transparent border-0 d-flex justify-content-between px-3 pb-3">
                            <a href="{% url 'edit_client' client.id %}" class="btn btn-sm btn-outline-info rounded-pill">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                            <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º -->
                            <button class="btn btn-sm btn-outline-danger rounded-pill" data-bs-toggle="modal" data-bs-target="#deleteModal{{ client.id }}">üóë –£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    </div>
                </div>

                <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
                <div class="modal fade" id="deleteModal{{ client.id }}" tabindex="-1" aria-labelledby="deleteModalLabel{{ client.id }}" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="deleteModalLabel{{ client.id }}">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
                            </div>
                            <div class="modal-body">
                                –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ {{ client.name }}?
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                                <a href="{% url 'delete_client' client.id %}" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å</a>
                            </div>
                        </div>
                    </div>
                </div>

            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info text-center mt-5">
            –ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ üöÄ
        </div>
    {% endif %}
</div>
{% endblock %}
